{% extends "base.html" %}
{% block title %}User Dashboard{% endblock %}
{% block content %}
<h2>Welcome, {{ user.username }}</h2>

{% if user.profile.is_verified %}
    <a href="{% url 'room_request' %}">Request Room</a><br><br>
    <h4>Your Requests</h4>
    <ul>
        {% for request in user.roomrequest_set.all %}
            <li>{{ request.room.name }} - {{ request.duration }} - {{ request.status }}
                {% if request.status == 'pending' %}
                    <a href="{% url 'cancel_request' request.id %}">Cancel</a>
                {% endif %}
            </li>
        {% empty %}
            <li>No requests found.</li>
        {% endfor %}
    </ul>
    <ul>
        {% for req in user_requests %}
            <li>
                <a href="{% url 'request_detail' req.id %}">{{ req.room.name }} - {{ req.duration }} - {{ req.status }}</a>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Your account is not verified yet. Please wait for admin approval.</p>
{% endif %}
{% endblock %}
